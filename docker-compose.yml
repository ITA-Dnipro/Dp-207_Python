version: "3"
services: 
    postgres_server:
        build: ./postgres_server
        restart: always
        env_file: ./postgres_server/.env
    redis_server:
        image: redis:alpine
        restart: always
    pgadmin:
        build: ./pgadmin4
        restart: always
        env_file: ./pgadmin4/.env
        ports: 
            - 7000:7000
        depends_on: 
            - postgres_server
    djangoserver:
        build: .
        restart: always
        ports: 
            - 5000:5000
        volumes: 
            - .:/usr/src/app
        depends_on: 
            - postgres_server
            - redis_server
    transport_parser:
        build: ./transport_parser
        restart: always
        env_file: ./transport_parser/.env
        ports: 
            - 4500:4500
        depends_on:
            - postgres_server
            - djangoserver
        volumes: 
            - ./transport_parser:/usr/src/app
    flask_hotels:
        build: ./flask_hotels_service
        restart: always
        ports:
            - 5001:5001
        volumes:
            - .:/usr/src/app
    flask_weather:
        build: ./flask_weather_service
        restart: always
        ports:
            - 5002:5002
        volumes:
            - .:/usr/src/app
    tg_bot:
        build: ./tg_bot
        restart: always
        volumes:
            - ./tg_bot:/usr/src/app

